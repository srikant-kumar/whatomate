---
title: Users
description: User management API
---

import { Aside } from '@astrojs/starlight/components';

<Aside type="caution">
  User management endpoints require the `users:read`, `users:create`, `users:update`, or `users:delete` permissions respectively.
</Aside>

## Overview

Manage users within your organization. Users are assigned roles that control their access to features through granular permissions.

## Profile & Password Change

All users (regardless of role) can access their profile to view account information and change their password. The Profile page is accessible from the user menu in the top navigation.

### Get Current User

```bash
GET /api/me
```

#### Response

```json
{
  "status": "success",
  "data": {
    "id": "uuid",
    "email": "user@example.com",
    "full_name": "John Doe",
    "role": {
      "id": "uuid",
      "name": "admin",
      "description": "Full access to all features"
    },
    "permissions": ["users:read", "users:create", "contacts:read", "..."],
    "is_super_admin": false,
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

### Change Password

```bash
PUT /api/me/password
```

#### Request Body

```json
{
  "current_password": "oldpassword",
  "new_password": "newsecurepassword"
}
```

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `current_password` | string | Yes | Current password for verification |
| `new_password` | string | Yes | New password (minimum 8 characters) |

#### Response

```json
{
  "status": "success",
  "data": {
    "message": "Password changed successfully"
  }
}
```

## List Users

Retrieve all users in your organization.

```bash
GET /api/users
```

<Aside type="note">
  Requires `users:read` permission.
</Aside>

### Query Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `search` | string | Filter by name or email |

### Response

```json
{
  "status": "success",
  "data": {
    "users": [
      {
        "id": "uuid",
        "email": "user@example.com",
        "full_name": "John Doe",
        "role_id": "uuid",
        "role": {
          "id": "uuid",
          "name": "agent",
          "is_system": true
        },
        "is_active": true,
        "is_available": true,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-01T00:00:00Z"
      }
    ]
  }
}
```

## Get User

Retrieve a single user.

```bash
GET /api/users/{id}
```

### Response

```json
{
  "status": "success",
  "data": {
    "id": "uuid",
    "email": "user@example.com",
    "full_name": "John Doe",
    "role_id": "uuid",
    "role": {
      "id": "uuid",
      "name": "agent",
      "is_system": true
    },
    "is_active": true,
    "is_available": true,
    "created_at": "2024-01-01T00:00:00Z",
    "updated_at": "2024-01-01T00:00:00Z"
  }
}
```

## Create User

Create a new user in your organization.

```bash
POST /api/users
```

<Aside type="note">
  Requires `users:create` permission.
</Aside>

### Request Body

```json
{
  "email": "newuser@example.com",
  "password": "securepassword",
  "full_name": "Jane Smith",
  "role_id": "uuid"
}
```

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `email` | string | Yes | Unique email address |
| `password` | string | Yes | Minimum 8 characters |
| `full_name` | string | Yes | Display name |
| `role_id` | string | No | UUID of the role to assign. If not provided, uses the organization's default role |

### Response

```json
{
  "status": "success",
  "data": {
    "id": "uuid",
    "email": "newuser@example.com",
    "full_name": "Jane Smith",
    "role_id": "uuid",
    "role": {
      "id": "uuid",
      "name": "agent",
      "is_system": true
    },
    "is_active": true,
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

## Update User

Update user details or role.

```bash
PUT /api/users/{id}
```

<Aside type="note">
  Requires `users:update` permission.
</Aside>

### Request Body

```json
{
  "full_name": "Jane Doe",
  "role_id": "uuid",
  "is_active": true
}
```

| Field | Type | Description |
|-------|------|-------------|
| `email` | string | New email address |
| `password` | string | New password (min 8 chars) |
| `full_name` | string | Display name |
| `role_id` | string | UUID of the role to assign |
| `is_active` | boolean | Enable/disable user |

<Aside type="caution">
  You cannot demote yourself or change your own role.
</Aside>

## Delete User

Remove a user from the organization.

```bash
DELETE /api/users/{id}
```

<Aside type="note">
  Requires `users:delete` permission.
</Aside>

<Aside type="caution">
  - You cannot delete yourself
  - You cannot delete the last admin user
  - Deleting a user will unassign all their contacts
</Aside>

### Response

```json
{
  "status": "success",
  "data": {
    "message": "User deleted successfully"
  }
}
```

## User Availability

Users can set their availability status for chat routing.

### Update Availability

```bash
PUT /api/users/{id}/availability
```

#### Request Body

```json
{
  "is_available": true
}
```

## See Also

- [Roles & Permissions](/features/roles-permissions) - Learn about the permission system
- [Roles API](/api-reference/roles) - Manage roles programmatically
